/*! jQuery jCarouselLite - v1.8.1 - 2012-12-16
* http://kswedberg.github.com/jquery-carousel-lite/
* Copyright (c) 2012 Karl Swedberg; Licensed MIT, GPL */
(function(e){function t(e,t){return t.autoStop&&(t.circular?t.autoStop:Math.min(e,t.autoStop))}function n(e){this.id&&(this.id+=e)}e.jCarouselLite={version:"1.8.1",curr:0},e.fn.jCarouselLite=function(r){var i=e.extend(!0,{},e.fn.jCarouselLite.defaults,r),s=Math.ceil,o=Math.abs;return this.each(function(){function J(){return j.slice(I).slice(0,N)}function K(t,n){if(v)return!1;n=n||{};var r=I,s=t>I,o=n.speed||i.speed,u=n.offset||0;return i.beforeStart&&i.beforeStart.call(w,J(),s),j.removeClass(i.activeClass),i.circular?(t>I&&t>F-N?(I%=x,t-=x,E.css(m,-I*p.liSize-u)):t<I&&t<0&&(I+=x,t+=x,E.css(m,-I*p.liSize-u)),I=t+t%1):(t<0?t=0:t>F-C&&(t=F-C),I=t,I===0&&i.first&&i.first.call(this,J(),s),I===F-C&&i.last&&i.last.call(this,J(),s),i.btnPrev&&i.$btnPrev.toggleClass(i.btnDisabledClass,I===0),i.btnNext&&i.$btnNext.toggleClass(i.btnDisabledClass,I===F-C)),B(I,O),e.jCarouselLite.curr=I,r===I&&!n.force?(i.afterEnd&&i.afterEnd.call(w,J(),s),I):(v=!0,g[m]=-(I*p.liSize),E.animate(g,o,i.easing,function(){i.afterEnd&&i.afterEnd.call(w,J(),s),v=!1}),j.eq(I).addClass(i.activeClass),I)}var r,u,a,f,l,c,h,p={div:{},ul:{},li:{}},d=!0,v=!1,m=i.vertical?"top":"left",g={},y=i.vertical?"height":"width",b=this,w=e(this),E=w.find("ul").eq(0),S=E.children("li"),x=S.length,T=i.visible,N=s(T),C=Math.floor(T),k=Math.min(i.start,x-1),L=1,A=0,O={},M={},_={},D=i.vertical?"y":"x",P=i.vertical?"x":"y",H=i.init.call(this,i,S);if(H===!1)return;w.data("dirjc",L),w.data(m+"jc",w.css(m)),i.circular&&(r=S.slice(x-N).clone(!0).each(n),u=S.slice(0,N).clone(!0).each(n),E.prepend(r).append(u),k+=N,A=N);var B=function(t,n){t=s(t);var r,o=(t-A)%x,u=o+C;return n.go&&(r=e(i.btnGo),r.removeClass(i.activeClass).removeClass(i.visibleClass),r.eq(o).addClass(i.activeClass),r.slice(o,o+C).addClass(i.visibleClass),u>r.length&&r.slice(0,u-r.length).addClass(i.visibleClass)),n.pager&&(a.removeClass(i.activeClass),a.eq(s(o/T)).addClass(i.activeClass)),o},j=E.children("li"),F=j.length,I=k;e.jCarouselLite.curr=I;var q=function(e){var t,n,r;return e?(p.div[y]="",p.li={width:"",height:""},p):(t=i.vertical?j.outerHeight(!0):j.outerWidth(!0),n=t*F,r=t*T,p.div[y]=r+"px",p.ul[y]=n+"px",p.ul[m]=-(I*t)+"px",p.li={width:j.width(),height:j.height()},p.liSize=t,p)},R=function(t){var n,r={div:{visibility:"visible",position:"relative",zIndex:2,left:"0"},ul:{margin:"0",padding:"0",position:"relative",listStyleType:"none",zIndex:1},li:{overflow:i.vertical?"hidden":"visible","float":i.vertical?"none":"left"}};t&&(n=q(!0),w.css(n.div),E.css(n.ul),j.css(n.li)),n=q(),i.autoCSS&&(d&&(e.extend(!0,n,r),d=!1),j.css(n.li),E.css(n.ul),w.css(n.div))};R();var U=0,z=t(x,i),W=typeof i.auto=="number"?i.auto:i.scroll,X=function(){b.setAutoAdvance=setTimeout(function(){if(!z||z>U)L=w.data("dirjc"),K(I+L*W),U++,X()},i.timeout)};e.each(["btnPrev","btnNext"],function(t,n){i[n]&&(i["$"+n]=e.isFunction(i[n])?i[n].call(w[0]):e(i[n]),i["$"+n].bind("click.jc",function(e){e.preventDefault();var n=t===0?I-i.scroll:I+i.scroll;return i.directional&&w.data("dirjc",t?1:-1),K(n)}))}),i.circular||(i.btnPrev&&k===0&&i.$btnPrev.addClass(i.btnDisabledClass),i.btnNext&&k+C>=F&&i.$btnNext.addClass(i.btnDisabledClass)),i.btnGo&&(e.each(i.btnGo,function(t,n){e(n).bind("click.jc",function(e){return e.preventDefault(),K(i.circular?T+t:t)})}),O.go=1);if(i.autoPager){f=s(x/T),a=[];for(var V=0;V<f;V++)a.push('<li><a href="#">'+(V+1)+"</a></li>");a.length>1&&(a=e("<ul>"+a.join("")+"</ul>").appendTo(i.autoPager).find("li")),a.find("a").each(function(t){e(this).bind("click.jc",function(e){e.preventDefault();var n=t*T;return i.circular&&(n+=T),K(n)})}),O.pager=1}B(k,O),i.mouseWheel&&w.mousewheel&&w.bind("mousewheel.jc",function(e,t){return t>0?K(I-i.scroll):K(I+i.scroll)}),i.pause&&i.auto&&w.bind("mouseenter.jc",function(){w.trigger("pauseCarousel.jc")}).bind("mouseleave.jc",function(){w.trigger("resumeCarousel.jc")}),i.auto&&X(),e.jCarouselLite.vis=J,w.bind("go.jc",function(e,t,n){typeof t=="undefined"&&(t="+=1");var r=typeof t=="string"&&/(\+=|-=)(\d+)/.exec(t);r?t=r[1]=="-="?I-r[2]*1:I+r[2]*1:t+=k,K(t,n)}).bind("startCarousel.jc",function(e){clearTimeout(b.setAutoAdvance),b.setAutoAdvance=undefined,w.trigger("go","+="+i.scroll),X(),w.removeData("pausedjc").removeData("stoppedjc")}).bind("resumeCarousel.jc",function(e,t){if(b.setAutoAdvance)return;clearTimeout(b.setAutoAdvance),b.setAutoAdvance=undefined;var n=w.data("stoppedjc");if(t||!n)X(),w.removeData("pausedjc"),n&&w.removeData("stoppedjc")}).bind("pauseCarousel.jc",function(e){clearTimeout(b.setAutoAdvance),b.setAutoAdvance=undefined,w.data("pausedjc",!0)}).bind("stopCarousel.jc",function(e){clearTimeout(b.setAutoAdvance),b.setAutoAdvance=undefined,w.data("stoppedjc",!0)}).bind("refreshCarousel.jc",function(e){R(i.autoCSS)}).bind("endCarousel.jc",function(){b.setAutoAdvance&&(clearTimeout(b.setAutoAdvance),b.setAutoAdvance=undefined),i.btnPrev&&i.$btnPrev.addClass(i.btnDisabledClass).unbind(".jc"),i.btnNext&&i.$btnNext.addClass(i.btnDisabledClass).unbind(".jc"),i.btnGo&&e.each(i.btnGo,function(t,n){e(n).unbind(".jc")}),i.circular&&(j.slice(0,N).remove(),j.slice(-N).remove()),e.each([m+"jc","pausedjc","stoppedjc","dirjc"],function(e,t){w.removeData(t)}),w.unbind(".jc")}),h={touchstart:function(e){M.x=e.targetTouches[0].pageX,M.y=e.targetTouches[0].pageY,M[m]=parseFloat(E.css(m)),M.time=+(new Date)},touchmove:function(e){var t=e.targetTouches.length;t===1?(e.preventDefault(),_.x=e.targetTouches[0].pageX,_.y=e.targetTouches[0].pageY,g[m]=M[m]+(_[D]-M[D]),E.css(g)):_=M},touchend:function(e){if(!_.x)return;var t=M[D]-_[D],n=o(t),r=n>i.swipeThresholds[D],s=o(M[P]-_[P])<i.swipeThresholds[P],u=+(new Date)-M.time,a=u<i.swipeThresholds.time,f=t>0?"+=":"-=",l=f+i.scroll,c={force:!0};a&&r&&s?c.speed=i.speed/2:!a&&n<p.liSize/2||!r||a&&!s?l="+=0":!a&&n>p.liSize/2&&(l=Math.round(n/p.liSize),l=f+(l>i.visible?i.visible:l),c.offset=t),w.trigger("go.jc",[l,c]),_={}}},"ontouchend"in document&&i.swipe&&w.bind("touchstart touchmove touchend",function(e){e=e.originalEvent,h[e.type](e)}),i.responsive&&(c=i.autoCSS,e(window).bind("resize",function(e){c&&(E.width(E.width()*2),c=!1),clearTimeout(l),l=setTimeout(function(){w.trigger("refreshCarousel"),c=i.autoCSS},100)}))}),this},e.fn.jCarouselLite.defaults={autoCSS:!0,btnPrev:null,btnNext:null,btnGo:null,autoPager:null,btnDisabledClass:"disabled",activeClass:"active",visibleClass:"vis",mouseWheel:!1,speed:200,easing:null,timeout:4e3,auto:!1,directional:!1,autoStop:!1,pause:!0,vertical:!1,circular:!0,visible:3,start:0,scroll:1,responsive:!1,swipe:!0,swipeThresholds:{x:80,y:120,time:150},init:function(){},first:null,last:null,beforeStart:null,afterEnd:null}})(jQuery);